<script type="text/javascript">
  function skillCheck(skillUsed, num)
  {
  	 var skill = document.getElementById("skillPicked");
	 skill.value = skillUsed;
	 var ansD = document.getElementById("answer");
  	 ansD.value = Math.floor(num + 1 + Math.random()*20);
  }
</script>

<%= stylesheet_link_tag "scaffold" %>
<div id="leftheader"></div>

<div id="header"><br/>
<img src="/images/dnd_banner.jpg" alt="Not here" width="100%" height="90" />
<div id="title">
<h1>Interactive Character Sheet</h1>	
</div>

</div>

<div id="rightheader"></div>
<div id="leftcol"></div>
<div id="content">
<h1>Character Skills</h1>
<% @skill = Skill.find(:first, :conditions => "player_id = '#{session[:p_id]}'") %>

<% if !@skill %>
	<% @skill = Skill.new(:Athletics => session[:str_mod], :Acrobatics => session[:dex_mod], 
			:Stealth => session[:dex_mod], :Arcana => session[:int_mod], :player_id => @player.id,
			:History => session[:int_mod], :Religion => session[:int_mod], :Bluff => session[:char_mod],
			:Diplomacy => session[:char_mod], :Intimidate => session[:char_mod], :Streetwise => session[:char_mod],
			:Dungeoneering => session[:wis_mod], :Heal => session[:wis_mod], :Insight => session[:wis_mod],
			:Nature => session[:wis_mod], :Perception => session[:wis_mod], :Thievery => session[:dex_mod],
			:Endurance => session[:con_mod]) %>
	<% @skill.save %>
<% end %>

	
	<br />
	<form>
	<table border="1" cellpadding="3%">
	  <tr>
	  	<th colspan = "7"> Skills </th>
	  </tr>
	  <tr>
	  	<th>Acrobatics</th>
	    <td><%= @skill.Acrobatics + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Acrobatics', <%= @skill.Acrobatics + (@player.character_level/2) %>)" value="Use Skill">
			<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
		<th style="width: 50px;border:0;"></th>
		<th>Arcana</th>
		<td><%= @skill.Arcana + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Arcana', <%= @skill.Arcana + (@player.character_level/2) %>)" value="Use Skill">
			<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
	  </tr>
	  <tr>
	  	<th>Athletics</th>
		<td><%= @skill.Athletics + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Athletics', <%= @skill.Athletics + (@player.character_level/2) %>)" value="Use Skill">
			<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
		<th style="border:0;"/>
		<th>Bluff</th>
		<td><%= @skill.Bluff + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Bluff', <%= @skill.Bluff + (@player.character_level/2) %>)" value="Use Skill">
		<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
	  </tr>
	  <tr>
	  	<th>Diplomacy</th>
		<td><%= @skill.Diplomacy + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Diplomacy', <%= @skill.Diplomacy + (@player.character_level/2) %>)" value="Use Skill">
		<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
		<th style="border:0;"/>
		<th>Dungeoneering</th>
		<td><%= @skill.Dungeoneering + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Dungeoneering', <%= @skill.Dungeoneering + (@player.character_level/2) %>)" value="Use Skill">
		<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
	  </tr>  
	  <tr>
	  	<th>Endurance</th>
		<td><%= @skill.Endurance + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Endurance', <%= @skill.Endurance + (@player.character_level/2) %>)" value="Use Skill">
			<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
		<th style="border:0;"/>
		<th>Heal</th>
		<td><%= @skill.Heal + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Heal', <%= @skill.Heal + (@player.character_level/2) %>)" value="Use Skill">
		<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
	  </tr>
	  <tr>
	  	<th>History</th>
		<td><%= @skill.History + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('History', <%= @skill.History + (@player.character_level/2) %>)" value="Use Skill">
		<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
		<th style="border:0;"/>
		<th>Insight</th>
		<td><%= @skill.Insight + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Insight', <%= @skill.Insight + (@player.character_level/2) %>)" value="Use Skill">
		<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
	  </tr>
	  <tr>
	  	<th>Intimidate</th>
		<td><%= @skill.Intimidate + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Intimidate', <%= @skill.Intimidate + (@player.character_level/2) %>)" value="Use Skill">
			<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
		<th style="border:0;"/>
		<th>Nature</th>
		<td><%= @skill.Nature + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Nature', <%= @skill.Nature + (@player.character_level/2) %>)" value="Use Skill">
		<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
	  </tr>    
	  <tr>
	  	<th>Perception</th>
		<td><%= @skill.Perception + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Perception', <%= @skill.Perception + (@player.character_level/2) %>)" value="Use Skill">
		<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
		<th style="border:0;"/>
		<th>Religion</th>
		<td><%= @skill.Religion + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Religion', <%= @skill.Religion + (@player.character_level/2) %>)" value="Use Skill">
		<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
	  </tr>    
	  <tr>
	  	<th>Stealth</th>
		<td><%= @skill.Stealth + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Stealth', <%= @skill.Stealth + (@player.character_level/2) %>)" value="Use Skill">
		<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
		<th style="border:0;"/>
		<th>Streetwise</th>
		<td><%= @skill.Streetwise + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Streetwise', <%= @skill.Streetwise + (@player.character_level/2) %>)" value="Use Skill">
		<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
	  </tr>  
	  <tr>
	  	<th>Thievery</th>
		<td><%= @skill.Thievery + (@player.character_level/2) %></td>
		<td><a href="javascript:skillCheck('Thievery', <%= @skill.Thievery + (@player.character_level/2) %>)" value="Use Skill">
		<img src="/images/contentbuttonuseskill.jpg" width="100" height="35" /></a></td>
	  </tr>
	  <tr>
	  	<th colspan=7>Result from <input type="text" readonly=true style="text-align:center;" 
			id="skillPicked"/> skill check = <input type="text" id="answer" readonly=true size=3 style="text-align:center;"/></th>
	  </tr>
	</table>
	</form>
	</div>
<div id="rightcol"></div>
<div id="footer">
<table>
<td><%= link_to image_tag("/images/buttoncharacter.jpg", :width => 150, :height => 68), player_path(:id => session[:p_id]) %></td>
<td><%= link_to image_tag("/images/buttonequipment.jpg", :width => 150, :height => 68), player_inventories_path %></td> 
<td><%= link_to image_tag("/images/buttonspellbook.jpg", :width => 150, :height => 68), player_spells_path %></td>
</table>
<br />
<br />
<div id="copyright">By Peter Hiesel and Ryan Costello</div>
<br />
</div>
